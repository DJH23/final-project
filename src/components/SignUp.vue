<template>
   <!-- component -->

  <!-- background img -->
<div>
  <!-- <div
   class="bg-cover bg-center opacity-30" style="background-image: url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd1ez3020z2uu9b.cloudfront.net%2Fimagecache%2Fblog-photos%2F16568.jpg&f=1&nofb=1&ipt=e601bc70c33ac7d83ce7e2a343775513e68273d6200f4d13e366c09676db8477&ipo=images)">
  </div> -->
  <div class="text-center mt-12 signing">
    <div class="flex items-center justify-center">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="160" height="160" viewBox="0 0 160 160" xml:space="preserve">
<desc>Created with Fabric.js 3.6.3</desc>
<defs>
</defs>
<g transform="matrix(0.3 0 0 0.3 81.45 81.45)"  >
<g style=""   >
		<g transform="matrix(1 0 0 1 -160 -160)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(234 179 8); fill-rule: nonzero; opacity: 1;"  transform=" translate(-71.5, -71.5)" d="M 71.5 0 C 32.075 0 0 32.075 0 71.5 S 32.075 143 71.5 143 S 143 110.925 143 71.5 S 110.925 0 71.5 0 z M 71.5 128 C 40.346 128 15 102.654 15 71.5 S 40.346 15 71.5 15 S 128 40.346 128 71.5 S 102.654 128 71.5 128 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 -160 0)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(234 179 8); fill-rule: nonzero; opacity: 1;"  transform=" translate(-71.5, -231.5)" d="M 71.5 160 C 32.075 160 0 192.075 0 231.5 S 32.075 303 71.5 303 s 71.5 -32.075 71.5 -71.5 S 110.925 160 71.5 160 z M 71.5 288 C 40.346 288 15 262.654 15 231.5 S 40.346 175 71.5 175 s 56.5 25.346 56.5 56.5 S 102.654 288 71.5 288 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 -160 160)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-71.5, -391.5)" d="M 71.5 320 C 32.075 320 0 352.075 0 391.5 S 32.075 463 71.5 463 s 71.5 -32.075 71.5 -71.5 S 110.925 320 71.5 320 z M 71.5 448 C 40.346 448 15 422.654 15 391.5 S 40.346 335 71.5 335 s 56.5 25.346 56.5 56.5 S 102.654 448 71.5 448 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 -160 -160)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-71.5, -71.5)" d="m 90.196 50.197 l -26.696 26.697 l -10.696 -10.697 c -2.93 -2.929 -7.678 -2.929 -10.607 0 s -2.929 7.678 0 10.606 l 16 16 c 1.464 1.465 3.384 2.197 5.303 2.197 s 3.839 -0.732 5.304 -2.197 l 32 -32 c 2.929 -2.929 2.929 -7.678 0 -10.606 c -2.93 -2.929 -7.678 -2.929 -10.608 7.10543e-15 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 -160 0)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-71.5, -231.5)" d="m 90.196 210.197 l -26.696 26.697 l -10.696 -10.697 c -2.93 -2.929 -7.678 -2.929 -10.607 0 s -2.929 7.678 0 10.606 l 16 16 c 1.464 1.465 3.384 2.197 5.303 2.197 s 3.839 -0.732 5.304 -2.197 l 32 -32 c 2.929 -2.929 2.929 -7.678 0 -10.606 c -2.93 -2.929 -7.678 -2.929 -10.608 0 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 16 -184)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-247.5, -47.5)" d="m 175.5 55 h 144 c 4.143 0 7.5 -3.358 7.5 -7.5 s -3.357 -7.5 -7.5 -7.5 h -144 c -4.143 0 -7.5 3.358 -7.5 7.5 s 3.357 7.5 7.5 7.5 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 84 -136)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-315.5, -95.5)" d="m 175.5 103 h 280 c 4.143 0 7.5 -3.358 7.5 -7.5 s -3.357 -7.5 -7.5 -7.5 h -280 c -4.143 0 -7.5 3.358 -7.5 7.5 s 3.357 7.5 7.5 7.5 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 16 -24)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-247.5, -207.5)" d="m 175.5 215 h 144 c 4.143 0 7.5 -3.358 7.5 -7.5 s -3.357 -7.5 -7.5 -7.5 h -144 c -4.143 0 -7.5 3.358 -7.5 7.5 s 3.357 7.5 7.5 7.5 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 84 24)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(168 85 247); fill-rule: nonzero; opacity: 1;"  transform=" translate(-315.5, -255.5)" d="m 455.5 248 h -280 c -4.143 0 -7.5 3.358 -7.5 7.5 s 3.357 7.5 7.5 7.5 h 280 c 4.143 0 7.5 -3.358 7.5 -7.5 s -3.357 -7.5 -7.5 -7.5 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 16 136)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(234 179 8); fill-rule: nonzero; opacity: 1;"  transform=" translate(-247.5, -367.5)" d="m 175.5 375 h 144 c 4.143 0 7.5 -3.358 7.5 -7.5 s -3.357 -7.5 -7.5 -7.5 h -144 c -4.143 0 -7.5 3.358 -7.5 7.5 s 3.357 7.5 7.5 7.5 z" stroke-linecap="round" />
</g>
		<g transform="matrix(1 0 0 1 84 184)"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(234 179 8); fill-rule: nonzero; opacity: 1;"  transform=" translate(-315.5, -415.5)" d="m 455.5 408 h -280 c -4.143 0 -7.5 3.358 -7.5 7.5 s 3.357 7.5 7.5 7.5 h 280 c 4.143 0 7.5 -3.358 7.5 -7.5 s -3.357 -7.5 -7.5 -7.5 z" stroke-linecap="round" />
</g>
</g>
</g>
</svg>
    </div>
    <h2 class="text-4xl tracking-tight pt-8">
      Sign up to TaskApp</h2>
    <h3 class="text-2xl py-5 tracking-tight">
      Start Organising Your Tasks Today
    </h3>
    <!-- <span class="text-sm"
      ><a href="#" class="text-yellow-500 hover:text-purple-500">
        <PersonalRouter :route="route" :buttonText="buttonText" />
      </a>
    </span> -->
  </div>
  <div class="flex justify-center my-2 mx-4 md:mx-0">
    <form class="w-full max-w-xl bg-white rounded-lg shadow-md p-6" @submit.prevent="signUp">
      <div class="flex flex-wrap -mx-3 mb-6">
        <div class="w-full md:w-full px-3 mb-6">
          <label
            class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
            for="Password"
            >Email address</label
          >
          <input 
            class="appearance-none block w-full text-gray-900 bg-yellow-500/25 font-medium border border-gray-400 rounded-lg py-3 px-3 leading-tight focus:outline-none focus:bg-purple-500/25 ease-in-out duration-300"
            
            type="email"
            placeholder="e.g: YourEmail@gmail.com"
            v-model="email"
            id="email"
            required
          />
        </div>
        <div class="w-full md:w-full px-3 mb-6">
          <label
            class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
            for="Password"
            >Password</label
          >
          <input
          class="appearance-none block w-full bg-yellow-500/25 text-gray-900 font-medium border border-gray-400 rounded-lg py-3 px-3 leading-tight focus:outline-none focus:bg-purple-500/25 ease-in-out duration-300"
          type="password"
          placeholder="************"
          v-model="password"
          id="password"
            required
          />
          
        </div>
        <div class="w-full md:w-full px-3 mb-6">
          <label
            class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
            for="Password"
            >Confirm Password</label
          >
          <input
          class="appearance-none block w-full bg-yellow-500/25 text-gray-900 font-medium border border-gray-400 rounded-lg py-3 px-3 leading-tight focus:outline-none focus:bg-purple-500/25 ease-in-out duration-300"
            type="password"
          placeholder="************"
          v-model="confirmPassword"
            id="confirmPassword"
            required
          />
          
        </div>

        <div class="w-full flex items-center justify-between px-3 mb-3">
          <label for="remember" class="flex items-center w-1/2">
            <input type="checkbox" name="" id="" class="mr-1 bg-white shadow" />
            <span class="text-sm text-gray-700 pt-1">Remember Me</span>
          </label>
          <!-- <div class="w-1/2 text-right">
            <a
              href="#"
              class="text-yellow-500 text-sm tracking-tight hover:text-purple-500"
              >Forgot your password?</a
            >
          </div> -->
        </div>
       
        <!-- <div class="flex items-center w-full mt-2">
          <div class="w-full md:w-1/3 px-3 pt-4 mx-2 border-t border-gray-400">
            <a href="https://facebook.com/" target="_blank"
              >Facebook>
              <button
                class="appearance-none flex items-center justify-center block w-full bg-gray-100 text-gray-700 shadow border border-yellow-500 rounded-lg py-3 px-3 leading-tight hover:bg-gray-200 hover:text-gray-700 focus:outline-none"
              >
                <svg
                  class="h-6 w-6 fill-current text-gray-700"
                  viewBox="0 0 512 512"
                >
                  <path
                    d="M455.27,32H56.73A24.74,24.74,0,0,0,32,56.73V455.27A24.74,24.74,0,0,0,56.73,480H256V304H202.45V240H256V189c0-57.86,40.13-89.36,91.82-89.36,24.73,0,51.33,1.86,57.51,2.68v60.43H364.15c-28.12,0-33.48,13.3-33.48,32.9V240h67l-8.75,64H330.67V480h124.6A24.74,24.74,0,0,0,480,455.27V56.73A24.74,24.74,0,0,0,455.27,32Z"
                  />
                </svg>
              </button>
            </a>
          </div>
          <div class="w-full md:w-1/3 px-3 pt-4 mx-2">
            <a href="https://linkedin.com/">
              <button
                class="appearance-none flex items-center justify-center block w-full bg-gray-100 text-gray-700 shadow border border-gray-500 rounded-lg py-3 px-3 leading-tight hover:bg-gray-200 hover:text-gray-700 focus:outline-none"
              >
                <svg
                  class="h-6 w-6 fill-current text-gray-700"
                  viewBox="0 0 512 512"
                >
                  <path
                    d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z"
                  />
                </svg>
              </button>
            </a>
          </div>
          <div class="w-full md:w-1/3 px-3 pt-4 mx-2 border-t border-gray-400">
            <a href="https://twitter.com/">
              <button
                class="appearance-none flex items-center justify-center block w-full bg-gray-100 text-gray-700 shadow border border-gray-500 rounded-lg py-3 px-3 leading-tight hover:bg-gray-200 hover:text-gray-700 focus:outline-none"
              >
                <svg
                  class="h-6 w-6 fill-current text-gray-700"
                  viewBox="0 0 512 512"
                >
                  <path
                    d="M496,109.5a201.8,201.8,0,0,1-56.55,15.3,97.51,97.51,0,0,0,43.33-53.6,197.74,197.74,0,0,1-62.56,23.5A99.14,99.14,0,0,0,348.31,64c-54.42,0-98.46,43.4-98.46,96.9a93.21,93.21,0,0,0,2.54,22.1,280.7,280.7,0,0,1-203-101.3A95.69,95.69,0,0,0,36,130.4C36,164,53.53,193.7,80,211.1A97.5,97.5,0,0,1,35.22,199v1.2c0,47,34,86.1,79,95a100.76,100.76,0,0,1-25.94,3.4,94.38,94.38,0,0,1-18.51-1.8c12.51,38.5,48.92,66.5,92.05,67.3A199.59,199.59,0,0,1,39.5,405.6,203,203,0,0,1,16,404.2,278.68,278.68,0,0,0,166.74,448c181.36,0,280.44-147.7,280.44-275.8,0-4.2-.11-8.4-.31-12.5A198.48,198.48,0,0,0,496,109.5Z"
                  />
                </svg>
              </button>
            </a>
          </div>
        </div> -->
        <br />
        <div class="w-full md:w-full px-3 mb-2">
        <button class="appearance-none block w-full bg-yellow-500 text-gray-100 font-bold border border-gray-200 rounded-lg py-3 px-3 leading-tight hover:bg-purple-500 focus:outline-none focus:bg-white focus:border-gray-500 transition duration-250 ease-in-out " type="submit">Sign Up</button>
        </div>
        </div>
      <div class="text-center">
        <span class="text-small">Already have an account? </span>
        <a href="#" class="text-yellow-500 hover:text-purple-500 transition duration-250 ease-in-out">
        <PersonalRouter :route="route" :buttonText="buttonText" />
      </a>
       </div>
    </form>
  </div>

<!-- old code 

</div>
  <div class="signing">
    <h1>Sign Up</h1>

    <p>Create your personal account to manage your own tasks.</p>

    <form @submit.prevent="signUp">
      <div class="">
        <label class="" for="">Email</label><br />
        <input
          class=""
          type="email"
          placeholder="YourEmail@gmail.com"
          v-model="email"
          id="email"
        />
      </div>
      <div class="">
        <label class="" for="">Password</label><br />
        <input
          class=""
          type="password"
          placeholder="************"
          v-model="password"
          id="password"
        />
      </div>
      <div class="">
        <label class="" for="">Confirm Password</label><br />
        <input
          class=""
          type="password"
          placeholder="************"
          v-model="confirmPassword"
          id="confirmPassword"
        />
      </div>
      <br />
      <button class="" type="submit">Sign Up</button>
      <p class="text-center">
        <span class="text-sm">Already have an account? </span>
        <PersonalRouter :route="route" :buttonText="buttonText" />
      </p>
    </form> -->
  </div> 
</template>

<script setup>
import { ref } from "vue";
import { useRouter } from "vue-router";
import PersonalRouter from "./PersonalRouter.vue";
import { useUserStore } from "../stores/user";
// Route Variables
const route = "/auth/login";
const buttonText = "Sign in";

// Input Fields
const email = ref(null);
const password = ref(null);
const confirmPassword = ref(null);
const errorMsg = ref(null);
// Error Message
// Show hide password variable
// Show hide confrimPassword variable
// Router to push user once SignedUp to Log In
const redirect = useRouter();
// function to SignUp user to supaBase with a timeOut() method for showing the error
async function signUp() {
  if (password.value === confirmPassword.value) {
    try {
      await useUserStore().signUp(email.value, password.value);
      // if (error) throw error;
      redirect.push({ path: "/auth" });
    } catch (error) {
      errorMsg.value = error.message;
      setTimeout(() => {
        errorMsg.value = null;
      }, 5000);
    }
    return;
  }
  errorMsg.value = "Passwords do not match";
  setTimeout(() => {
    errorMsg.value = null;
  }, 5000);
}
</script>

<style></style>
